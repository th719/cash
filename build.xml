<?xml version = '1.0' encoding = 'KOI8-R'?>

<!--Ant buildfile generated by Oracle9i JDeveloper-->
<!--Generated 16.01.2008 13:33:39-->
<project name="cash" default="deploy" basedir=".">

   <!--Set the JDeveloper home directory-->

   <property name="lib.dir" value="../../lib"/>  <!-- default - two levels above -->
   

   <!--Set the output directories-->
   <property name="src.dir" value="src"/>
   <property name="compile.outdir" value="classes"/>
   <property name="javadoc.outdir" value="javadoc"/>
   <property name="jar.dir" value="deploy"/>

   <property name="jar.home" value="../../jars"/>  <!-- default - two levels above -->

   <!--Set the classpath-->
   <path id="classpath">
      <pathelement location="classes"/>
      <pathelement location="${lib.dir}/log4j/log4j.jar"/>
      <pathelement location="${lib.dir}/swing/forms-1.0.1.jar"/>
      <pathelement location="${lib.dir}/jpos/comm.jar"/>
      <pathelement location="${lib.dir}/jpos/jcl.jar"/>
      <pathelement location="${lib.dir}/jpos/jpos16.jar"/>
      <pathelement location="${lib.dir}/jpos/mtlgjpos.jar"/>
      <pathelement location="${lib.dir}/own/thcommon-0.1.jar"/>
      <pathelement location="${lib.dir}/own/kkm_exc_sa.jar"/>
      <pathelement location="${lib.dir}/xercesxmlp/xercesImpl.jar"/>
      <pathelement location="${lib.dir}/xercesxmlp/xmlParserAPIs.jar"/>
      <pathelement location="${jar.home}/commons-0.1.jar"/>
      
   </path>

   <!--Set the source path-->
   <path id="srcpath">
      <pathelement location="src"/>
   </path>

   <target name="init">
      <buildnumber/>
      <tstamp>
        <format property="timestamp" pattern="dd.MM.yyyy HH:mm:ss"/>
      </tstamp>   
     <echo>Build number is ${build.number}</echo>
     <echo>Date build is ${timestamp}</echo>
  </target>


   <target name="compile" depends="init">
      <mkdir dir="${compile.outdir}"/>
      <copy file="${src.dir}/logo.png" todir="${compile.outdir}"/>
      <copy file="${src.dir}/hot_keys.cfg" todir="${compile.outdir}"/>
      <copy file="${src.dir}/conn.properties" todir="${compile.outdir}"/>
      <javac destdir="${compile.outdir}"  debug="on" encoding="KOI8-R">
         <classpath refid="classpath"/>
         <src refid="srcpath"/>
      </javac>
   </target>

   <target name="doc" depends="init">
      <mkdir dir="${javadoc.outdir}"/>
      <javadoc sourcepathref="srcpath" classpathref="classpath" destdir="${javadoc.outdir}" version="false" author="false" additionalparam="-J-Xmx32m">
         <package name="th.cash.ui.sale"/>
         <package name="th.cash.fr.doc"/>
         <package name="th.cash.ui.setup"/>
         <package name="th.cash.ui.util"/>
         <package name="th.cash.cd"/>
         <package name="th.cash.model"/>
         <package name="th.cash.fr"/>
         <package name="th.cash.dev"/>
         <package name="th.cash.fr.table"/>
         <package name="th.cash.env"/>
         <package name="th.cash.fr.state"/>
      </javadoc>
   </target>

   <target name="clean">
      <delete dir="${compile.outdir}"/>
      <delete dir="${javadoc.outdir}"/>
   </target>


   <target name="compress" depends="init">

     <mkdir dir="${jar.dir}"/>
     <jar destfile="${jar.dir}/cash.jar" 
          basedir="${compile.outdir}" 
          manifest="for_manifest.txt"
          includes="**/*.class *.png *.properties " 
          excludes="**/test/*.class *.cfg" >
       
        <manifest>
            <section name="Build info">
                <attribute name="Build" value="${build.number}"/>
                <attribute name="Date" value="${timestamp}"/>
            </section>
        </manifest>
     </jar>
   </target>


   <target name="make" depends="compile"/>  

   <target name="rebuild" depends="clean,compile"/>

   <target name="deploy" depends="clean,compile,compress"/>


</project>
